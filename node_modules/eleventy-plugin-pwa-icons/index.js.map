{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import { getOutputDirectory } from './get_build_directory';\n\nimport { isProduction } from './mode';\nimport { generateAndInsertIcons, PWAIconsOptions } from './transform_html';\n\n/**\n * Generates splash screens and icons, favicons, mstile images for PWA.\n * Also fills `icons` property in the `manifest.json` file.\n */\nexport const icons = (\n  config: Record<string, Function>,\n  {\n    logger,\n    icons = {},\n    manifest = {},\n    generatorOptions = {},\n    enabled = isProduction(),\n  }: PWAIconsOptions = {}\n): void => {\n  if (enabled) {\n    config.addTransform(\n      'icons',\n      async function (\n        this: { outputPath: string },\n        content: string,\n        outputPath: string\n      ): Promise<string> {\n        const outputFilePath = this.outputPath ?? outputPath;\n\n        return outputFilePath.endsWith('html')\n          ? generateAndInsertIcons(\n              content,\n              getOutputDirectory(outputFilePath),\n              {\n                icons,\n                logger,\n                manifest,\n                generatorOptions,\n              }\n            )\n          : content;\n      }\n    );\n  }\n};\n\nexport { PWAIconsOptions };\n"],"names":["config","logger","icons","manifest","generatorOptions","enabled","isProduction","addTransform","async","content","outputPath","outputFilePath","this","endsWith","generateAndInsertIcons","getOutputDirectory"],"mappings":"oLASqB,CACnBA,GAEEC,OAAAA,EACAC,MAAAA,EAAQ,GACRC,SAAAA,EAAW,GACXC,iBAAAA,EAAmB,GACnBC,QAAAA,EAAUC,kBACS,MAEjBD,GACFL,EAAOO,aACL,SACAC,eAEEC,EACAC,SAEA,MAAMC,YAAiBC,KAAKF,0BAAcA,EAE1C,OAAOC,EAAeE,SAAS,QAC3BC,yBACEL,EACAM,qBAAmBJ,GACnB,CACET,MAAAA,EACAD,OAAAA,EACAE,SAAAA,EACAC,iBAAAA,IAGJK"}
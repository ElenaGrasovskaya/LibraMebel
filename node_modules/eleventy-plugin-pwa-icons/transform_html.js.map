{"version":3,"file":"transform_html.js","sources":["../src/transform_html.ts"],"sourcesContent":["import { done } from './pretty';\nimport { handleManifest } from './update_manifest';\nimport { TransformOptions } from './types';\nimport { buildManifestLinkTag } from './build_manifest_link';\nimport { Options, handleImages, LoggerFunction } from './generate_images';\n\nexport type PWAIconsOptions = TransformOptions & {\n  logger?: LoggerFunction;\n  /** Decide whether plugin should do its work. */\n  enabled?: boolean;\n  generatorOptions?: Options;\n};\n\n/**\n * Transform function that inserts links of PWA images\n * into HTML file and updates manifest file.\n */\nexport const generateAndInsertIcons = async (\n  html: string,\n  buildDirectory: string,\n  { icons, manifest, generatorOptions: options, logger }: PWAIconsOptions\n): Promise<string> => {\n  const { html: imagesHTML, manifestJsonContent } = await handleImages({\n    icons,\n    buildDirectory,\n    options,\n    logger,\n  });\n\n  const manifestPublicUrl = await handleManifest(manifestJsonContent, {\n    manifest,\n    buildDirectory,\n  });\n\n  const htmlWithIcons = html\n    .replace('</head>', buildManifestLinkTag(manifestPublicUrl) + '</head>')\n    .replace('</head>', imagesHTML + '</head>');\n\n  done('Links of generated icons were injected into HTML');\n\n  return htmlWithIcons;\n};\n"],"names":["async","html","buildDirectory","icons","manifest","generatorOptions","options","logger","imagesHTML","manifestJsonContent","handleImages","manifestPublicUrl","handleManifest","htmlWithIcons","replace","buildManifestLinkTag","done"],"mappings":"0OAiBsCA,MACpCC,EACAC,GACEC,MAAAA,EAAOC,SAAAA,EAAUC,iBAAkBC,EAASC,OAAAA,MAE9C,MAAQN,KAAMO,EAAUC,oBAAEA,SAA8BC,eAAa,CACnEP,MAAAA,EACAD,eAAAA,EACAI,QAAAA,EACAC,OAAAA,IAGII,QAA0BC,iBAAeH,EAAqB,CAClEL,SAAAA,EACAF,eAAAA,IAGIW,EAAgBZ,EACnBa,QAAQ,UAAWC,uBAAqBJ,GAAqB,WAC7DG,QAAQ,UAAWN,EAAa,WAInC,OAFAQ,OAAK,oDAEEH"}
{"version":3,"file":"raster_optimizer_options.js","sources":["../src/raster_optimizer_options.ts"],"sourcesContent":["import { sep, extname } from 'path';\n\nimport { isUrl } from './is_url';\nimport { URL_DELIMITER } from './constants';\nimport { buildImageName } from './image_name';\nimport { getImageFormatsFrom } from './image_formats';\n\n/** Build options for raster image optimizer. */\nexport const getRasterOptimizerOptions = (\n  input: string,\n  outputDirectory: string,\n  options: object = {}\n) => ({\n  widths: [null],\n  svgShortCircuit: true,\n  formats:\n    // Before downloading image we don't know its type,\n    // so by default we will convert it into default formats.\n    getImageFormatsFrom(isUrl(input) ? '' : extname(input).slice(1)),\n  outputDir: outputDirectory,\n  urlPath:\n    URL_DELIMITER + outputDirectory.split(sep).slice(1).join(URL_DELIMITER),\n  sharpPngOptions: {\n    quality: 100,\n    progressive: true,\n  },\n  sharpJpegOptions: {\n    quality: 100,\n    progressive: true,\n  },\n  sharpWebpOptions: {\n    quality: 100,\n    // Use near_lossless compression mode.\n    nearLossLess: true,\n  },\n  sharpAvifOptions: {\n    quality: 100,\n  },\n  filenameFormat: (\n    id: string,\n    src: string,\n    width: string,\n    format: string,\n    options: object\n  ) => buildImageName(input, src, format),\n  ...options,\n});\n"],"names":["input","outputDirectory","options","widths","svgShortCircuit","formats","getImageFormatsFrom","isUrl","extname","slice","outputDir","urlPath","URL_DELIMITER","split","sep","join","sharpPngOptions","quality","progressive","sharpJpegOptions","sharpWebpOptions","nearLossLess","sharpAvifOptions","filenameFormat","id","src","width","format","buildImageName"],"mappings":"8OAQyC,CACvCA,EACAC,EACAC,EAAkB,oBAElBC,OAAQ,CAAC,MACTC,iBAAiB,EACjBC,QAGEC,sBAAoBC,QAAMP,GAAS,GAAKQ,UAAQR,GAAOS,MAAM,IAC/DC,UAAWT,EACXU,QACEC,gBAAgBX,EAAgBY,MAAMC,OAAKL,MAAM,GAAGM,KAAKH,iBAC3DI,gBAAiB,CACfC,QAAS,IACTC,aAAa,GAEfC,iBAAkB,CAChBF,QAAS,IACTC,aAAa,GAEfE,iBAAkB,CAChBH,QAAS,IAETI,cAAc,GAEhBC,iBAAkB,CAChBL,QAAS,KAEXM,eAAgB,CACdC,EACAC,EACAC,EACAC,EACAzB,IACG0B,iBAAe5B,EAAOyB,EAAKE,IAC7BzB"}
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("path"),t=require("@11ty/eleventy-img"),i=require("./logger.js"),r=require("./is_url.js"),o=require("./optimize_svg.js"),s=require("./public_path.js"),a=require("./raster_optimizer_options.js"),n=require("./constants.js");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=l(t);exports.createImageShortcode=({inputDirectory:t=e.join(n.DEFAULT_SOURCE_DIRECTORY_NAME,n.DEFAULT_ASSETS_DIRECTORY_NAME,n.DEFAULT_IMAGES_DIRECTORY_NAME),outputDirectory:l=e.join(n.DEFAULT_BUILD_DIRECTORY_NAME,n.DEFAULT_IMAGES_DIRECTORY_NAME),svgoOptions:_={},rasterOptions:p={}}={})=>async(c,{alt:E="",title:g="",classes:A=[]}={})=>{const d=Array.isArray(A)?A:[A],D=r.isUrl(c)?c:e.resolve(t,c);i.log(`Start optimizing "${D}" file.`);const O=await u.default(D,a.getRasterOptimizerOptions(D,s.getPublicPath(D,t,l),p)).catch((e=>i.log("Could not optimize image: %O",e)));return i.log(`Image "${D}" is optimized. Stats:\n%O`,O),n.SVG_NAME in O?o.optimizeSVG(e.resolve(O[n.SVG_NAME][0].outputPath),d,_):u.default.generateHTML(O,{alt:E,title:g,class:d.join(" "),loading:"lazy",decoding:"async"},{whitespaceMode:"inline"})};
//# sourceMappingURL=index.js.map
